---
title: "ฟังก์ชันแปรผัน"
type: docs
weight: 2
---
**ฟังก์ชัน Variadic** ใน Scheme คือฟังก์ชันที่ยอมรับจำนวนอาร์กิวเมนต์ที่แปรผันได้ ฟังก์ชันเหล่านี้มีความหลากหลายสูงและช่วยให้คุณสร้างโค้ดที่ยืดหยุ่นและนำมาใช้ซ้ำได้ ในการเขียนโปรแกรมเชิงฟังก์ชัน ฟังก์ชันแปรผันช่วยลดความซับซ้อนของการดำเนินการที่ต้องประมวลผลอินพุตตามจำนวนที่ต้องการ เช่น การรวมรายการตัวเลขหรือการเชื่อมสตริงเข้าด้วยกัน

ฟังก์ชัน Variadic มีประโยชน์อย่างยิ่งเมื่อ:

- ไม่สามารถกำหนดจำนวนข้อโต้แย้งล่วงหน้าได้
- คุณต้องใช้การดำเนินการเดียวกันกับรายการอินพุตแบบไดนามิก
- การเขียนยูทิลิตี้สำหรับการรวมหรือการแปลงข้อมูล

### ไวยากรณ์ของฟังก์ชัน Variadic

ฟังก์ชัน Variadic ถูกกำหนดโดยใช้สัญลักษณ์ `.` หน้าชื่อพารามิเตอร์สุดท้าย พารามิเตอร์สุดท้ายนี้รวบรวมอาร์กิวเมนต์ที่เหลือทั้งหมดลงในรายการ

```scheme
(define (function-name fixed-parameters . variadic-parameter)
  body-expression)
```

- **`fixed-parameters`:** อาร์กิวเมนต์ที่จำเป็นและคงที่ใดๆ ที่ฟังก์ชันยอมรับ
- **`variadic-parameter`:** พารามิเตอร์พิเศษนำหน้าด้วย `.` ที่รวบรวมอาร์กิวเมนต์เพิ่มเติมเป็นรายการ
- **`body-expression`:** ตรรกะที่ดำเนินการเมื่อมีการเรียกใช้ฟังก์ชัน

### ตัวอย่างของฟังก์ชัน Variadic

#### ฟังก์ชัน Variadic พื้นฐาน

```scheme
(define (sum . numbers)
  (apply + numbers))
```

- **คำอธิบาย**:
  - `numbers` รวบรวมข้อโต้แย้งทั้งหมดไว้ในรายการ
  - `apply` ใช้ฟังก์ชัน `+` กับองค์ประกอบทั้งหมดของรายการ

**การใช้งาน**:
```scheme
(sum 1 2 3 4 5)  ; Returns 15
```

#### ฟังก์ชั่น Variadic พร้อมพารามิเตอร์คงที่

คุณสามารถรวมพารามิเตอร์คงที่เข้ากับพารามิเตอร์ variadic เพื่อสร้างฟังก์ชันที่ยืดหยุ่นมากขึ้น

```scheme
(define (greet prefix . names)
  (map (lambda (name) (string-append prefix " " name)) names))
```

- **คำอธิบาย**:
  - `prefix` เป็นอาร์กิวเมนต์ที่ตายตัว
  - `names` รวบรวมข้อโต้แย้งที่เหลือไว้ในรายการ
  - แต่ละชื่อขึ้นต้นด้วยสตริงที่กำหนดโดยใช้ `map` และ `lambda`

**การใช้งาน**:
```scheme
(greet "Hello" "Alice" "Bob" "Charlie")  ; Returns ("Hello Alice" "Hello Bob" "Hello Charlie")
```

#### การรวมตรรกะแบบคงที่และแบบแปรผัน

```scheme
(define (describe-collection collection-name . items)
  (string-append collection-name ": " (string-join items ", ")))
```

- **คำอธิบาย**:
  - `collection-name` เป็นพารามิเตอร์คงที่
  - `items` รวบรวมข้อโต้แย้งเพิ่มเติมลงในรายการ
  - ฟังก์ชั่นเชื่อมชื่อคอลเลกชันและรายการต่างๆ ให้เป็นสตริงเดียว

**การใช้งาน**:
```scheme
(describe-collection "Fruits" "Apple" "Banana" "Cherry")
; Returns "Fruits: Apple, Banana, Cherry"
```

### กรณีการใช้งานขั้นสูง

#### กำลังประมวลผลอินพุตตามอำเภอใจ

ฟังก์ชัน Variadic เป็นเลิศในการจัดการข้อมูลที่กำหนดเอง ต่อไปนี้เป็นตัวอย่างในการรวมเฉพาะจำนวนบวก:

```scheme
(define (sum-positive . numbers)
  (apply + (filter (lambda (x) (> x 0)) numbers)))
```

- กรองตัวเลขที่ไม่เป็นบวกออกก่อนสรุปผล

**การใช้งาน**:
```scheme
(sum-positive -5 3 7 -2 8)  ; Returns 18
```

#### ฟังก์ชัน Variadic พร้อมลอจิกแบบเรียกซ้ำ

```scheme
(define (max-value first . rest)
  (if (null? rest)
      first
      (max first (apply max rest))))
```

- **คำอธิบาย**:
  - `first` จัดการอาร์กิวเมนต์แรก
  - `rest` รวบรวมข้อโต้แย้งที่เหลือไว้ในรายการ
  - คำนวณค่าสูงสุดซ้ำ ๆ

**การใช้งาน**:
```scheme
(max-value 10 20 5 40 15)  ; Returns 40
```

### ประโยชน์ของฟังก์ชัน Variadic

- **ความยืดหยุ่น:** สามารถรองรับกรณีอินพุตได้หลากหลาย
- **ความกระชับ:** ลดความจำเป็นในการใช้ฟังก์ชันที่โอเวอร์โหลดหลายรายการ
- **การดำเนินการแบบไดนามิก:** เปิดใช้งานการประมวลผลข้อมูลรันไทม์โดยไม่ต้องรู้จำนวนอาร์กิวเมนต์ล่วงหน้า

### เมื่อใดจึงควรใช้ฟังก์ชัน Variadic

ใช้ฟังก์ชันแปรผันเมื่อ:

- ฟังก์ชันจำเป็นต้องประมวลผลอาร์กิวเมนต์จำนวนที่ไม่รู้จัก
- การดำเนินการเดียวใช้กับอินพุตทั้งหมด (เช่น การรวม การเชื่อมข้อมูล หรือการแมป)
- ลดความซับซ้อนของตรรกะลำดับที่สูงกว่าด้วยอาร์กิวเมนต์แบบไดนามิก

หลีกเลี่ยงฟังก์ชันแปรผันเมื่อ:

- การตรวจสอบอินพุตหรือการตรวจสอบประเภทมีความซับซ้อน
- แก้ไขข้อโต้แย้งที่เพียงพอสำหรับตรรกะที่ต้องการ
- ความสามารถในการอ่านลดลงเนื่องจากการดำเนินการที่ซับซ้อนมากเกินไป

### บทสรุปฟังก์ชัน Variadic ใน Scheme จัดเตรียมกลไกที่มีประสิทธิภาพสำหรับการจัดการอินพุตแบบไดนามิก เมื่อเข้าใจไวยากรณ์และการใช้งานแล้ว คุณจะสามารถสร้างสคริปต์ที่ยืดหยุ่นและมีประสิทธิภาพซึ่งปรับให้เข้ากับสถานการณ์ต่างๆ ได้ เมื่อรวมกับฟังก์ชันลำดับที่สูงกว่า ฟังก์ชัน variadic จะทำให้โค้ดของคุณกระชับและแสดงออกได้มากขึ้น