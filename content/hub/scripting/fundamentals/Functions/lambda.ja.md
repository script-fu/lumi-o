---
title: "ラムダ関数"
type: docs
weight: 1
---
Scheme の **Lambda 関数**は匿名関数です。つまり、名前のない関数です。これらの関数はインラインで定義され、通常は短い 1 回限りの操作に使用されます。 `lambda` コンストラクトは関数型プログラミングの強力なツールであり、その場で簡潔で柔軟なロジックを作成できます。

Lambda 関数は、次の場合に特に役立ちます。

- 特定の一時的な目的のために小さな機能が必要です。
- `map`、`filter`、`fold` などの高階関数に関数を引数として渡す。
- 他の関数から関数を返す。

### Lambda 関数の構文

Lambda 関数は独自に定義できます...

```scheme
(lambda (parameter1 parameter2 ...)
  body-expression)
```

...またはすぐに呼び出されます:

```scheme
((lambda (parameter1 parameter2 ...)
   body-expression)
 argument1 argument2 ...)
```

- **`parameter1, parameter2, ...`:** 関数が受け入れるパラメータ。
- **`body-expression`:** 関数が呼び出されたときに実行されるロジック。
- **即時呼び出し:** 2 番目の形式は、引数を指定してすぐに呼び出されるラムダを示します。

### Lambda 関数の例

#### Lambda を使用した単純な計算

```scheme
((lambda (x y) (+ x y)) 3 5)  ; Returns 8
```

ここで:

- 2 つの数値 (`x` と `y`) を加算するラムダ関数が作成されます。
- この関数は、引数 `3` および `5` を使用して直ちに呼び出されます。

#### インライン Lambda 関数

次の例は、名前付き関数とラムダ関数の両方で `for-each` を使用する方法を示しています。

**名前付き関数の使用:**

```scheme
(define (print-item x)
  (lumi-message (number->string x)))

(for-each print-item (list 1 2 3 4))
```

- **説明**:
  - `print-item` は、数値を文字列 (`number->string`) に変換し、`lumi-message` を使用して出力する名前付き関数です。
  - `for-each` は、リスト `(1 2 3 4)` 内の各要素に `print-item` を適用します。

**出力**: 1 2 3 4

**Lambda 関数の使用:**

同じロジックをラムダ関数を使用してインラインで記述することができ、別の名前付き関数の必要性を回避できます。

```scheme
(for-each (lambda (x) (lumi-message (number->string x)))
  (list 1 2 3 4))
```

- **説明**:
  - `(lambda (x) (lumi-message (number->string x)))` は匿名関数を定義します。
  - この関数は `for-each` によってリスト `(1 2 3 4)` の各要素に適用されます。

**出力**: 1 2 3 4

#### 引数としての Lambda 関数

Lambda 関数は、多くの場合、`map` や `filter` などの高階関数に直接渡されます。

#### 数値のリストを二乗する

```scheme
(map (lambda (x) (* x x)) '(1 2 3 4))  ; Returns (1 4 9 16)
```

- `lambda` 関数は、リストの各要素を 2 乗します。
- `map` 関数は、`lambda` を各要素に適用します。

#### 戻り値としての Lambda 関数

別の関数からラムダ関数を返して動的な動作を作成できます。

#### 加算関数の生成

```scheme
(define (make-adder n)
  (lambda (x) (+ x n)))

(define add5 (make-adder 5))
(add5 10)  ; Returns 15
```

- `make-adder` は、特定の数値を追加する新しいラムダ関数を生成します (`n`)。
- 返されたラムダは `add5` に保存され、入力に `5` が追加されます。

#### `let` で Lambda を使用する

ラムダは、ローカル スコープの一時関数を作成するために `let` とともに使用されることがよくあります。

#### 加算用のローカルラムダ

```scheme
(let ((add (lambda (a b) (+ a b))))
  (add 3 4))  ; Returns 7
```

- `let` は、ラムダ関数を `add` という名前にバインドします。
- ラムダは、`let` スコープ内の通常の関数として使用されます。

#### ラムダと高階関数の結合

ラムダは、高次関数と組み合わせて複雑なデータ変換を実行すると威力を発揮します。

#### 偶数のフィルタリング

```scheme
(filter (lambda (x) (= (modulo x 2) 0)) '(1 2 3 4 5 6))  ; Returns (2 4 6)
```- `lambda` は、数値が偶数かどうかをチェックします。
- `filter` 関数は、ラムダを使用してリストから偶数のみを保持します。

### Lambda 関数の利点

- **簡潔さ:** Lambda は、個別の名前付き関数を定義する必要性を排除することで定型コードを削減します。
- **柔軟性:** 必要に応じて定義して使用できるため、コードがよりモジュール化されます。
- **可読性の向上:** 短く特定のタスクの場合、ラムダは追加の名前付き関数でコードを乱雑にすることなく、意図を明確にします。

### Lambda 関数を使用する場合

次の場合にラムダ関数を使用します。

- ロジックは短く、自己完結型です。
- この関数は一時的に、または特定の範囲内でのみ必要となります。
- `map`、`filter`、`reduce` などの高階関数を使用している。

可読性が低下する可能性があるため、複雑な複数行のロジックにはラムダを使用しないでください。より広範な操作を行う場合は、代わりに名前付き関数を使用してください。

### 結論

Scheme の Lambda 関数は、特定のタスクの匿名関数を定義するための簡潔かつ強力な方法を提供します。その柔軟性と使いやすさにより、Scheme プログラマーにとって不可欠なツールとなっています。 `lambda` を効果的に使用する方法を理解すると、よりクリーンでモジュール化された効率的なスクリプトを作成できるようになります。