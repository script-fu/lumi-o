---
title: "делать"
type: docs
weight: 5
---
Функция `do` в Scheme — это механизм цикла, который позволяет выполнять итерацию с условиями инициализации, обновления и завершения. Это особенно полезно, когда вам нужно выполнить последовательность операций определенное количество раз или до тех пор, пока не будет выполнено условие.

Общая форма `do`:

```scheme
(do ((var1 init1 update1)
     (var2 init2 update2)
     (var3 init3 update3))
    (termination-condition result)
  body)
```

- **Переменная**: переменная(и) цикла.
- **Начальное значение**: начальное значение каждой переменной цикла.
- **Обновить-выражение**: выражение для обновления переменных цикла в конце каждой итерации.
- **Условие завершения**: условие остановки цикла.
- **Выражение-результата**: значение, возвращаемое при завершении цикла.
- **Тело**: код, который будет выполняться на каждой итерации.

---

### Пример: просуммируйте числа от 1 до 5

```scheme
(do ((i 1 (+ i 1))      ; Initialize i to 1, increment by 1
     (sum 0 (+ sum i))) ; Initialize sum to 0, add i to sum
    ((> i 5) sum)       ; Terminate when i > 5, return sum
  (lumi-message (number->string sum))) ; Print sum at each step
```

- Переменная цикла `i` начинается с 1 и увеличивается на 1 на каждой итерации.
- Переменная `sum` накапливает сумму `i`.
- Цикл завершается, когда `i > 5`, возвращая окончательное значение `sum`.

**Вывод**: `15`

---

### Как это работает

1. **Инициализация**:
   - Каждой переменной цикла присваивается исходное значение.

2. **Проверка прекращения**:
   - В начале каждой итерации проверяется условие завершения. Если это правда, цикл останавливается и вычисляется результирующее выражение.

3. **Итерация**:
   - Если условие завершения ложно, выполняется тело и переменные цикла обновляются с использованием соответствующих выражений обновления.

---

### Резюме

- Конструкция `do` обеспечивает гибкий способ реализации циклов с несколькими переменными и сложными условиями завершения.
— Это полезно для задач, требующих обновления состояния на протяжении итераций.
— Условие завершения определяет, когда цикл заканчивается, и может вернуть окончательный результат.

Используя `do`, вы можете реализовать итеративные алгоритмы в Scheme с точным контролем над инициализацией, обновлениями и завершением. Это делает `do` комбинацией **механизма привязки с ограниченной областью действия** (например, `let`) и **итеративной структуры управления**, что позволяет ему обрабатывать циклы и временное состояние простым и лаконичным способом.