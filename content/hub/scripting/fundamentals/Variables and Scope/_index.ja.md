---
title: "変数とスコープ"
type: docs
weight: 1
---
Scheme では、変数とそのスコープの管理が、効率的で保守可能なスクリプトを作成するための中心的な概念です。変数にはスクリプトで操作できるデータ値が格納されますが、スコープはそれらの変数にアクセスできる場所を定義します。変数を効果的に定義して使用する方法を理解すると、構造化され、再利用可能で、エラーのないコードを作成できます。

### ダイナミックタイピング

スキームは動的に型付けされます。前もって型を宣言する必要はなく、変数は時間の経過とともにさまざまな種類の値を保持できます。

```scheme
(define x 42)       ; x is a number
(set! x "hello")    ; now x is a string
```

### スキームにおける変数定義とスコープの役割

変数の定義とそのスコープの管理には、次のようないくつかの目的があります。
- **データの整理:** 変数には情報が保存されるため、スクリプトが読みやすく管理しやすくなります。
- **再利用性の向上:** スコープ付き変数を使用すると、競合することなくコードのセクションを再利用できます。
- **カプセル化:** ローカライズされたスコープにより、スクリプトのさまざまな部分にある変数間の意図しない相互作用が防止されます。
- **ロジックの簡素化:** 限定されたスコープ内の一時変数により、大規模な計算やワークフローの複雑さが軽減されます。

### 変数定義の種類とスコープ

Scheme には、変数の定義とスコープ設定のためのいくつかの構造が用意されています。
- **`let`:** コードの特定のブロック内の変数のローカル バインディングを作成します。
- **`let*`:** `let` の順次バージョン。各バインディングは前のバインディングに依存できます。
- **名前は `let`:** 再帰的なローカル プロシージャまたはループを定義するための強力な構造。
- **`define`:** スクリプト全体でアクセスできるグローバル変数または関数を作成します。

### 変数の定義とスコープの仕組み

変数の定義とスコープには通常、次のものが含まれます。
1. **変数の宣言:** 特定のコンテキストで変数に値を代入します。
2. **制限範囲:** 変数にアクセスできる場所を制御します (例: `let` ブロック内またはグローバル)。
3. **変数の使用:** 変数値にアクセスして変更して、計算、ロジック、または手続き的な操作を実行します。

### 例: ローカル変数に `let` を使用する

`let` 構造を使用すると、特定のブロック内でのみ使用できる一時変数を定義できます。

```scheme
(let ((x 10)
      (y 20))
  (+ x y))
```

- この例では、`x` と `y` をローカル値で宣言し、それらの合計を計算します。

### 例: グローバル変数に `define` を使用する

`define` 構造は、グローバル スコープの変数または関数を作成します。

```scheme
(define pi 3.14159)
(define (circle-area radius)
  (* pi radius radius))
```

- このスクリプトは、グローバル定数 `pi` と、それを使用する関数 `circle-area` を定義します。

### スコープの比較: ローカルとグローバル

|特集 |ローカル スコープ (`let`、`let*`) |グローバルスコープ (`define`) |
|-----------------|------------------------------------------|------------------------------------------|
| **アクセシビリティ** |それが定義されているブロックに限定される |スクリプト全体を通じてアクセス可能 |
| **カプセル化** |意図しないインタラクションを防止 |他のグローバルに定義された変数と競合する可能性があります。
| **使用例** |特定のタスクの一時変数 | | 全体で使用される共有変数または関数

＃＃＃ まとめ- **変数の定義とスコープ**は、Scheme スクリプト内のデータを整理および管理するための基礎です。
- **ローカル スコープ** (`let`、`let*`、名前は `let`) を使用して一時変数をカプセル化し、競合を回避します。
- スクリプト全体で共有される再利用可能な関数または定数には、**グローバル スコープ** (`define`) を使用します。
- これらの構造を明確に理解すると、コードの読みやすさ、保守性、信頼性が向上します。