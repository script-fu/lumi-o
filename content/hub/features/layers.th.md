---
title: "เลเยอร์และการแก้ไขแบบไม่ทำลาย"
type: docs
---
ระบบเลเยอร์ของ Lumi ช่วยให้ขั้นตอนการทำงานที่ซับซ้อนและไม่ทำลาย โดยสามารถควบคุมการผสม การมาสก์ และองค์ประกอบได้เต็มรูปแบบ

## ภาพรวม

เลเยอร์เป็นรากฐานของภาพประกอบที่มีโครงสร้าง แต่ละเลเยอร์มีความเป็นอิสระ โดยมีโหมดการผสม ความทึบ และเลเยอร์มาสก์เสริมของตัวเอง กลุ่มสามารถซ้อนเลเยอร์ตามลำดับชั้นด้วยคุณสมบัติการผสมและการตัดของตัวเอง

## การเข้าถึง

**แผง** → **เลเยอร์** หรือแผง **เลเยอร์** เริ่มต้นทางด้านขวา

## ประเภทเลเยอร์

### เลเยอร์สี

เลเยอร์แรสเตอร์มาตรฐานสำหรับเนื้อหาที่ทาสี จัดเก็บข้อมูลพิกเซลเป็นบัฟเฟอร์ GEGL พร้อมตัวเลือกความโปร่งใสอัลฟา

### เลเยอร์กลุ่ม

คอนเทนเนอร์แบบลำดับชั้นสำหรับจัดระเบียบเลเยอร์ที่เกี่ยวข้อง กลุ่มสามารถมีโหมดการผสม ความทึบ และคลิปปิ้งมาสก์ของตนเองได้ การฉายภาพแบบกลุ่มจะประกอบขึ้นตามความต้องการ

### เลเยอร์มาสก์

มาสก์ระดับสีเทาติดกับเลเยอร์ใดๆ เพื่อควบคุมความทึบต่อพิกเซล การวาดภาพบนหน้ากากด้วยสีขาวทำให้พิกเซลทึบแสง สีดำทำให้โปร่งใส สีเทาให้ความทึบบางส่วน

## โหมดการผสม

ทุกเลเยอร์มีโหมดการผสมซึ่งกำหนดว่าจะรวมเข้ากับเลเยอร์ด้านล่างอย่างไร:

- **ปกติ**: การผสมผสานความทึบโดยตรง
- **คูณ**: ทำให้เข้มขึ้นโดยการคูณค่าสี
- **หน้าจอ**: ทำให้สว่างขึ้นโดยการกลับด้าน คูณ และกลับด้านอีกครั้ง
- **ภาพซ้อนทับ**: การรวมกันของการคูณและหน้าจอ
- **เพิ่ม**: การผสมแบบเติมแต่ง (รวมค่าสี)
- **ลบ**: การผสมแบบลบ
- **สี เฉดสี ความอิ่มตัว ความสว่าง**: การผสมส่วนประกอบ HSL

## การตัดและมาสก์

- **โหมดคอมโพสิต: คลิปเป็นฉากหลัง**: การตั้งค่าโหมดคอมโพสิตของเลเยอร์เป็น **คลิปเป็นฉากหลัง** จะจำกัดการจัดองค์ประกอบเฉพาะบริเวณที่เลเยอร์ **ยูเนี่ยน** ที่สะสมด้านล่างสร้างความทึบ เลเยอร์จะทาสีเฉพาะในกรณีที่เลเยอร์เหล่านั้นมีเนื้อหาและไม่สามารถขยายรอยเท้าอัลฟ่าได้ ซึ่งตั้งค่าไว้สำหรับแต่ละเลเยอร์ในกล่องโต้ตอบแอตทริบิวต์เลเยอร์ (เมนูแบบเลื่อนลง**โหมดคอมโพสิต**) เมื่อโหมดคอมโพสิตที่มีประสิทธิภาพของเลเยอร์เป็นอย่างอื่นที่ไม่ใช่ Union ไอคอนรูปตาในแผงเลเยอร์จะถูกแทนที่ด้วยไอคอนคอมโพสิตเพื่อระบุพฤติกรรมการจัดองค์ประกอบที่ไม่เป็นมาตรฐาน

  **ตัวอย่าง: รูปร่างอัลฟ่าที่ใช้ร่วมกัน:** ในกลุ่ม เลเยอร์ด้านล่างมีวงกลมที่เติมสีไว้บนพื้นหลังโปร่งใส ตั้งค่าเป็นโหมดผสม **รวม** เริ่มต้น ทุกเลเยอร์ที่อยู่ด้านบนในกลุ่มเดียวกันจะถูกตั้งค่าเป็น **คลิปเป็นฉากหลัง** เลเยอร์เหล่านั้นสามารถทาสีเฉพาะส่วนที่วงกลมให้ความทึบเท่านั้น (รูปร่างเดียว หลายชั้น) นี่เป็นรูปแบบทั่วไปสำหรับการลงสี การแรเงา และรายละเอียดภายในภาพเงาที่กำหนดโดยไม่ต้องกังวลเรื่องการหก
- **เลเยอร์มาสก์**: ใช้มาสก์ระดับสีเทาเพื่อควบคุมการมองเห็นเลเยอร์ทีละพิกเซล ทาสีขาวบนหน้ากากเผยให้เห็น ปกปิดสีดำ; สีเทาให้ความทึบบางส่วน
- **Pure-Child Masks**: มาสก์จะถูกจัดเก็บเป็นเด็กภายในสแต็กที่ดึงออกได้ เพื่อป้องกันข้อมูลสูญหายระหว่างการแปลง

## การเลือกเลเยอร์ (ปุ่ม Alt)

การแตะ **Alt** (Alt ซ้าย) ขณะวางเมาส์เหนือผืนผ้าใบจะเป็นการเลือกเลเยอร์ที่มีพิกเซลที่มองเห็นได้อยู่ใต้เคอร์เซอร์ โดยไม่ต้องเปลี่ยนเครื่องมือหรือคลิก

### มันทำงานอย่างไร

- **กด Alt**: เคอร์เซอร์เปลี่ยนเป็นเป้าเล็ง แสดงว่าโหมดการเลือกทำงานอยู่
- **ปล่อย Alt**: Lumi เลือกเลเยอร์ที่ไม่โปร่งใสบนสุดที่ตำแหน่งเคอร์เซอร์ (ความทึบ > 25%) แล้วเลือก เลเยอร์จะถูกไฮไลต์ในแผงเลเยอร์ และแถบสถานะจะแสดง **"เลเยอร์ที่เลือก: 'ชื่อเลเยอร์'"**
- มีการวาดจุดจับที่จุดกึ่งกลางของเลเยอร์ที่เลือกบนผืนผ้าใบ ที่จับจะลดลงและจางหายไปเมื่อเคอร์เซอร์เลื่อนออกไป

### ปั่นจักรยานผ่านเลเยอร์การแตะ Alt แต่ละครั้งที่ตำแหน่งเดียวกันจะเลือก **เลเยอร์ถัดไปลงมา** ในสแต็กที่จุดนั้น Lumi จำเลเยอร์ที่เลือกล่าสุดและข้ามไปยังเลเยอร์ที่อยู่ด้านล่าง เมื่อถึงด้านล่างสุดของสแต็ก การแตะครั้งถัดไปจะวนกลับไปยังเลเยอร์บนสุดที่ตำแหน่งนั้น ทำให้เข้าถึงเลเยอร์ที่ซ้อนกันในฉากที่ซับซ้อนได้อย่างง่ายดายโดยการแตะ Alt ซ้ำๆ

### กฎการยกเลิก

การเลือกจะถูกยกเลิก (ไม่เริ่มทำงานเมื่อกดปุ่ม Alt) หากเกิดเหตุการณ์อย่างใดอย่างหนึ่งต่อไปนี้ขณะที่กดปุ่ม Alt ค้างไว้:

- กดปุ่มเมาส์ (คลิกซ้ายหรือขวา)
- กดปุ่มอื่นใด

เพื่อให้แน่ใจว่าท่าทางการลาก Alt (เช่น การปรับขนาดแปรง) และทางลัดที่แก้ไขด้วย Alt ทำงานโดยไม่เปลี่ยนเลเยอร์ที่ใช้งานอยู่โดยไม่ตั้งใจ

### ข้อจำกัด

- การเลือกเลเยอร์ไม่เปิดใช้งานระหว่างการทำงานของเครื่องมือ **แปลง** Alt มีความหมายที่แตกต่างออกไป
- การเลือกจะไม่เกิดขึ้นหากมีการเลือกแบบลอยตัว
- เหลือเพียงการเลือกทริกเกอร์ Alt เท่านั้น right Alt ถือเป็นตัวแก้ไขมาตรฐาน

## การดำเนินงาน

ในแผงเลเยอร์:

- **สร้างเลเยอร์**: คลิกขวา → **เลเยอร์ใหม่** หรือใช้เมนู **เลเยอร์**
- **ซ้ำ**: คลิกขวา → **ซ้ำ** หรือ **เลเยอร์** → **ซ้ำ**
- **ลบ**: คลิกขวา → **ลบ** หรือเลือกแล้วกด **ลบ**
- **เรียงลำดับใหม่**: ลากเลเยอร์ขึ้นหรือลงเพื่อเปลี่ยนลำดับการเรียงซ้อน
- **เปลี่ยนชื่อ**: ดับเบิลคลิกที่ชื่อเลเยอร์
- **ผสานลง**: คลิกขวา → **รวมลง** เพื่อรวมกับเลเยอร์ด้านล่าง
- **ทำให้ภาพเรียบขึ้น**: **ภาพ** → **ทำให้ภาพเรียบขึ้น** เพื่อรวมเลเยอร์ที่มองเห็นได้ทั้งหมด

## คุณสมบัติของเลเยอร์

- **ความทึบ**: 0–100% ควบคุมความโปร่งใสของเลเยอร์โดยรวม
- **โหมดการผสม**: เมนูแบบเลื่อนลงเพื่อเลือกวิธีที่เลเยอร์รวมกับเลเยอร์ด้านล่าง
- **มองเห็นได้/ซ่อน**: ไอคอนรูปตาสลับการมองเห็นเลเยอร์

## ล็อคเลเยอร์

ไอคอนล็อคจะแสดงอยู่ในแถวส่วนหัวของแผงเลเยอร์ แต่ละล็อคสามารถสลับได้อย่างอิสระ การคลิกขวาที่ไอคอนล็อคจะเป็นการตั้งค่าเฉพาะ (ล็อคเฉพาะประเภทนั้น และปลดล็อครายการอื่นๆ ทั้งหมดในเลเยอร์เดียวกัน)

- **ล็อคอัลฟ่า**: ป้องกันการทาสีบนพื้นที่โปร่งใส ฝีแปรงมีผลกับพิกเซลที่มีความทึบอยู่แล้วเท่านั้น พิกเซลโปร่งใสไม่ได้รับการแก้ไข มีประโยชน์สำหรับการทาสีภายในรูปทรงที่มีอยู่โดยไม่หกออกไปข้างนอก

- **ล็อคมาสก์**: ป้องกันการแก้ไขเลเยอร์มาสก์ หน้ากากยังคงมองเห็นได้และใช้งานได้ แต่ไม่สามารถทาสีหรือแก้ไขได้ในขณะที่ล็อคนี้เปิดอยู่

- **สีล็อค**: ล็อคภาพวาดเป็นสีเฉพาะ: สีพื้นหน้าปัจจุบันในขณะที่ใช้การล็อค จังหวะต่อมาบนเลเยอร์นี้จะใช้สีที่เก็บไว้โดยไม่คำนึงถึงสีพื้นหน้าที่ใช้งานอยู่ การปลดล็อคจะทิ้งสีที่เก็บไว้

- **ล็อคเนื้อหา** (ล็อคพิกเซล): ป้องกันการแก้ไขพิกเซลทั้งหมดในเลเยอร์ เลเยอร์ไม่สามารถทาสี เติม เปลี่ยนรูป หรือแก้ไขอย่างอื่นได้ มีประโยชน์สำหรับการปกป้องชั้นที่เสร็จแล้ว

- **ตำแหน่งล็อค**: ป้องกันไม่ให้เลเยอร์ถูกย้ายหรือเปลี่ยนรูป เลเยอร์ยังคงสามารถแก้ไขได้ เฉพาะการเปลี่ยนแปลงตำแหน่ง (เครื่องมือย้าย เครื่องมือแปลง) เท่านั้นที่ถูกบล็อก

- **ล็อคการมองเห็น**: ป้องกันไม่ให้ไอคอนรูปดวงตาสลับการมองเห็นของเลเยอร์ ปกป้องเลเยอร์ที่ควรมองเห็น (หรือซ่อน) อยู่เสมอในระหว่างการแก้ไข

การล็อคทั้งหมดจะถูกบันทึกพร้อมกับโปรเจ็กต์และคงอยู่ตลอดเซสชัน

## เอฟเฟกต์เลเยอร์ (fx)

ตัวกรอง GEGL แบบไม่ทำลายที่ใช้ผ่านเมนู **ตัวกรอง** จะถูกจัดเก็บเป็นเอฟเฟกต์แบบคอมมิตบนเลเยอร์ แทนที่จะแก้ไขพิกเซลทันที เมื่อเลเยอร์มีเอฟเฟกต์ที่กำหนดอย่างน้อยหนึ่งรายการ ไอคอน **fx** จะปรากฏในแผงเลเยอร์ถัดจากเลเยอร์นั้น### การเข้าถึงป๊อปอัปเอฟเฟกต์

คลิกไอคอน **fx** บนแถวเลเยอร์ในแผงเลเยอร์เพื่อเปิดป๊อปโอเวอร์ **เอฟเฟกต์เลเยอร์** สำหรับเลเยอร์นั้น

ป๊อปโอเวอร์จะแสดงสแต็กตัวกรองสำหรับเลเยอร์ โดยแต่ละเอฟเฟกต์ที่คอมมิตจะแสดงตามชื่อพร้อมปุ่มสลับการมองเห็นด้านข้าง

### การควบคุม

- **สลับตาการมองเห็น** (ด้านบนของป๊อปอัป): สลับเปิดหรือปิดเอฟเฟกต์ทั้งหมดพร้อมกัน
- **สลับการมองเห็นต่อตัวกรอง**: แต่ละแถวตัวกรองจะมีไอคอนรูปตาของตัวเองเพื่อเปิดหรือปิดเอฟเฟกต์นั้นโดยอิสระ
- **แก้ไข**: เปิดกล่องโต้ตอบการตั้งค่าสำหรับตัวกรองที่เลือก ทำให้สามารถปรับพารามิเตอร์ได้โดยไม่ทำลาย
- **เพิ่ม/ลด**: เลื่อนตัวกรองที่เลือกขึ้นหรือลงในสแต็ก โดยเปลี่ยนลำดับเอฟเฟกต์
- **ผสาน**: กำหนดเอฟเฟกต์ที่มองเห็นได้ทั้งหมดให้กับพิกเซลของเลเยอร์ ทำให้การเปลี่ยนแปลงเป็นแบบถาวร ไอคอน fx จะถูกลบออกหากมีการรวมเอฟเฟกต์ทั้งหมดเข้าด้วยกัน ไม่สามารถผสานได้บนเลเยอร์กลุ่ม
- **ลบ**: ลบตัวกรองที่เลือกทั้งหมด หน้าต่างป๊อปโอเวอร์จะปิดโดยอัตโนมัติหากไม่มีเอฟเฟกต์เหลืออยู่

การคลิกสองครั้งที่ตัวกรองในรายการจะเป็นการเปิดกล่องโต้ตอบการแก้ไขด้วย

**แก้ไข** และ **ลบ** จะถูกบล็อกหากล็อคพิกเซลทำงานบนเลเยอร์ ไม่สามารถเรียงลำดับตัวกรองใหม่ได้ในขณะที่กำลังแก้ไขตัวกรองอยู่

### การเพิ่มเอฟเฟกต์

ใช้ตัวกรองจาก **ตัวกรอง** → (หมวดหมู่ใดก็ได้) หากกำหนดเป้าหมายเลเยอร์ที่ใช้งานอยู่และการดำเนินการทำงานโดยไม่ทำลาย ผลลัพธ์จะถูกจัดเก็บเป็นเอฟเฟกต์เลเยอร์แทนที่จะรวมเข้ากับข้อมูลพิกเซล ไอคอน fx จะปรากฏบนเลเยอร์เมื่อมีเอฟเฟกต์อย่างน้อยหนึ่งรายการ

## กล่องโต้ตอบแอตทริบิวต์เลเยอร์

ดับเบิลคลิกที่เลเยอร์ในแผงเลเยอร์เพื่อเปิดกล่องโต้ตอบแอตทริบิวต์เลเยอร์

### ตัวตน

- **แท็กสี**: ป้ายกำกับสีสำหรับการจัดระเบียบภาพในแผงเลเยอร์

### พื้นที่คอมโพสิตและโหมด

- **พื้นที่คอมโพสิต**: พื้นที่สีที่ใช้เมื่อจัดวางเลเยอร์นี้กับเลเยอร์ด้านล่าง ตัวเลือก: อัตโนมัติ, เชิงเส้น (RGB), การรับรู้ (RGB)
- **โหมดคอมโพสิต**: ควบคุมวิธีที่เลเยอร์อัลฟ่าโต้ตอบกับฉากหลัง ตัวเลือกต่างๆ ได้แก่ Union (ส่งผลต่อทุกพื้นที่ เป็นค่าเริ่มต้นสำหรับโหมด Normal) คลิปเป็นฉากหลัง (มีผลเฉพาะพื้นที่ที่มีเนื้อหาอยู่แล้ว เป็นค่าเริ่มต้นสำหรับโหมดผสมผสานอื่นๆ ส่วนใหญ่) และ Intersection

### ขนาดและออฟเซ็ต

สำหรับเลเยอร์ที่มีอยู่ **ขนาด** จะแสดงขนาดเลเยอร์และขนาดมาสก์ (หากแนบมาสก์) เป็นป้ายกำกับแบบอ่านอย่างเดียว

**การชดเชยเลเยอร์**: สปินเนอร์ X และ Y ควบคุมตำแหน่งของเลเยอร์บนผืนผ้าใบ การเปลี่ยนแปลงมีผลทันทีแทนที่จะปิดกล่องโต้ตอบ

หากเลเยอร์มีมาสก์ **การชดเชยมาสก์** (สปินเนอร์ X และ Y สำหรับตำแหน่งอิสระของมาสก์) จะแสดงอยู่ด้านล่าง

เมื่อสร้างเลเยอร์ใหม่ ช่องความกว้างและความสูงและเมนูแบบเลื่อนลง **เติมด้วย** (พื้นหน้า พื้นหลัง สีขาว โปร่งใส) จะแทนที่การแสดงขนาดแบบอ่านอย่างเดียว

### คุณสมบัติเลเยอร์ (ปรสิตถาวร)

ส่วนล่างของกล่องโต้ตอบประกอบด้วยตารางชื่อ / ค่าที่สามารถเลื่อนได้สำหรับปรสิตถาวร (ข้อมูลเมตาคีย์-ค่าตามอำเภอใจที่แนบมากับเลเยอร์) ค่าเหล่านี้จะถูกจัดเก็บไว้กับโปรเจ็กต์และสามารถเข้าถึงได้จากอินเทอร์เฟซการเขียนสคริปต์ Scheme

- คลิกเซลล์ใดก็ได้ในคอลัมน์ชื่อหรือค่าเพื่อแก้ไขแบบอินไลน์
- **เพิ่ม**: เพิ่มแถวว่างใหม่ต่อท้าย
- **ลบ**: ลบแถวที่เลือกและปรสิตออกจากเลเยอร์

ถ้าชั้นไม่มีปรสิตถาวร แถวเริ่มต้นว่างสามแถวจะปรากฏขึ้น

### สถานะเนื้อหาบรรทัดข้อมูลแบบอ่านอย่างเดียวที่ด้านล่างจะแสดงสถานะเนื้อหาปัจจุบันของเลเยอร์ (และมาสก์ หากมี): **ชัดเจน** **สม่ำเสมอ** หรือ **ผสม** คำนำหน้า `*` ระบุว่าเลเยอร์มีการเปลี่ยนแปลงที่ยังไม่ได้บันทึกนับตั้งแต่บันทึกครั้งล่าสุด

## ประสิทธิภาพ

- **โหมดด่วน**: เมื่อวาดภาพบนเลเยอร์เดียวที่ซ้อนกันภายในกลุ่ม Lumi จะสลับกลุ่มบรรพบุรุษเป็นการเรนเดอร์แบบพาสทรูชั่วคราวตามระยะเวลาของลายเส้น โดยข้ามการจัดองค์ประกอบการฉายภาพทั้งกลุ่มใหม่ ซึ่งจะช่วยขจัดความล่าช้าในการอัปเดตการฉายภาพแบบซ้อนระหว่างการใช้หมึกและการลงสี การรวมคอมโพสิตแบบเต็มจะดำเนินการต่อเมื่อจังหวะสิ้นสุดลง เลเยอร์ที่ใช้งานอยู่เปลี่ยนแปลง หรือก่อนการบันทึก

  โหมดเร็วจะถูกปิดใช้งานเมื่อมีเงื่อนไขใดๆ ต่อไปนี้ใช้กับกลุ่มบรรพบุรุษ:
  - กลุ่มมีตัวกรองแบบไม่ทำลายที่มองเห็นได้ (ตัวกรองจำเป็นต้องมีบัฟเฟอร์การฉายภาพ)
  - โหมดผสมผสานของกลุ่มเป็นอย่างอื่นที่ไม่ใช่ **ปกติ** หรือ **ส่งผ่าน**
  - กลุ่มมีเด็กโดยตรงโดยใช้โหมดคอมโพสิต **คลิปไปยังฉากหลัง** หรือ **จุดตัด** (ซึ่งต้องใช้ข้อมูลฉากหลังจากบัฟเฟอร์การฉายภาพ)

  โหมดด่วนจะไม่เปิดใช้งานสำหรับเลเยอร์ระดับบนสุด การเลือกแบบลอย หรือเมื่อมีการกำหนดเป้าหมายหลายเลเยอร์พร้อมกัน

  การจัดโครงสร้างไฟล์เพื่อหลีกเลี่ยงเงื่อนไขเหล่านี้ในกลุ่มการลงสีโดยใช้โหมดการผสมผสานแบบปกติบนเลเยอร์ ช่วยให้มั่นใจได้ว่าโหมดเร็วจะยังคงทำงานตลอดเซสชันการใช้หมึกหรือการลงสี
- **Lazy Loading**: โหลดโปรเจ็กต์ขนาดใหญ่ได้รวดเร็ว ข้อมูลเลเยอร์จะถูกโหลดเมื่อจำเป็นเท่านั้น (เช่น เมื่อทำให้มองเห็นหรือทาสี)

## รูปแบบไฟล์

เลเยอร์ มาสก์ และคุณสมบัติทั้งหมดจะถูกจัดเก็บในรูปแบบเปิด `.lum` ของ Lumi ไฟล์นี้เป็นไดเร็กทอรีที่ประกอบด้วยบัฟเฟอร์แต่ละเลเยอร์และข้อมูลเมตา เพื่อให้มั่นใจถึงความเข้ากันได้และการเข้าถึงในระยะยาว