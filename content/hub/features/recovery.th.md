---
title: "การกู้คืนไฟล์"
type: docs
---
Lumi ดูแลรักษาระบบการกู้คืนสองระบบที่เป็นอิสระ — บันทึกพื้นหลังอัตโนมัติและจุดตรวจสอบส่วนเพิ่มด้วยตนเอง — ทั้งสองระบบสามารถเข้าถึงได้จากกล่องโต้ตอบเดียว

## การเข้าถึง

**ไฟล์** → **กู้คืนรูปภาพ**

กล่องโต้ตอบจะเปิดขึ้นมาล่วงหน้าพร้อมสถานะการกู้คืนสำหรับไฟล์ที่เปิดอยู่ในปัจจุบัน ใช้ตัวเลือกไฟล์ที่ด้านบนเพื่อสลับไปยังไฟล์ `.lum` อื่น

---

## บันทึกอัตโนมัติ

Lumi บันทึกสแนปชอตพื้นหลังของงานของคุณในช่วงเวลาปกติขณะทำการแก้ไข บันทึกอัตโนมัติจะถูกเขียนไปยัง **ไดเร็กทอรีแคชแยกต่างหาก** โดยปล่อยให้ไฟล์ `.lum` ทำงานไม่ถูกแตะต้อง:

```
~/.cache/lumi/autosave/~home~user~projects~my-painting.lum/
```

การเข้ารหัสพาธใช้ `~` เป็นตัวคั่นเพื่อสร้างไดเร็กทอรีแคชเฉพาะต่อไฟล์ ซึ่งหมายความว่าการบันทึกอัตโนมัติจะพร้อมใช้งานแม้ว่าไฟล์โครงการจะสูญหายหรือเสียหายก็ตาม

- **ความถี่**: กำหนดค่าได้ใน **แก้ไข** → **การตั้งค่า** → **ประสิทธิภาพ** → ช่วงเวลาบันทึกอัตโนมัติ
- **สถานที่จัดเก็บ**: ตั้งค่าไว้ในการตั้งค่า → ประสิทธิภาพด้วย
- **วัตถุประสงค์**: การกู้คืนความเสียหาย แท็บบันทึกอัตโนมัติในกล่องโต้ตอบกู้คืนรูปภาพจะแสดงสถานะการบันทึกอัตโนมัติพร้อมการประทับเวลา

เมื่อคุณเปิดไฟล์ที่มีข้อมูลบันทึกอัตโนมัติที่ใหม่กว่า Lumi จะแจ้งให้คุณทราบเมื่อถึงเวลาเปิด

---

## การบันทึกที่เพิ่มขึ้น

การบันทึกส่วนเพิ่มคือระบบจุดตรวจสอบด้วยตนเองซึ่งจัดเก็บ **ภายในไฟล์โครงการ** ภายใต้ `recovery/` โครงสร้างคือ:

```
my-painting.lum/recovery/
  └── primary-01.lum/       (full baseline, created on first Ctrl+S)
      ├── delta-0001.lum/   (Ctrl+S checkpoint, only modified buffers)
      ├── delta-0002.lum/
      └── ...
```

บรรทัดฐาน `primary-NN.lum/` ใหม่ถูกเขียนหลังจาก **ไฟล์ → บันทึก** การกด Ctrl+S ครั้งต่อไปจะสร้างไดเร็กทอรีย่อย `delta-NNNN.lum/` ที่มีเฉพาะบัฟเฟอร์ที่เปลี่ยนแปลงตั้งแต่บรรทัดฐานล่าสุด บันทึกเดลต้าอัตโนมัติและเดลต้าบันทึกด้วยตนเองใช้ตัวนับแยกกันเพื่อไม่ให้รบกวนประวัติของกันและกัน

การบันทึกส่วนเพิ่มจะถูก **ปิดใช้งานโดยค่าเริ่มต้น** และต้องเปิดใช้งานตามโปรเจ็กต์:

1. **ไฟล์** → **บันทึกเป็น** (Shift+Ctrl+S)
2. ในกล่องโต้ตอบบันทึกเป็น ให้เลือก **บันทึกส่วนเพิ่ม** และตั้งค่าขีดจำกัด **บันทึกสูงสุด** ได้หรือไม่
3. การตั้งค่าจะถูกจัดเก็บไว้กับโปรเจ็กต์และใช้กับการกด Ctrl+S ที่ตามมาทั้งหมด

เมื่อคุณเปิดไฟล์ `.lum` ที่มีการบันทึกแบบเพิ่มหน่วยที่ใหม่กว่าบันทึกหลัก Lumi จะแสดงพร้อมท์ **ตรวจพบการบันทึกแบบเพิ่มหน่วย** เพื่อเสนอให้โหลดจุดตรวจสอบล่าสุด

---

## กู้คืนกล่องโต้ตอบรูปภาพ

กล่องโต้ตอบมีสามแท็บและปุ่มดำเนินการสองปุ่ม

### แท็บบันทึกอัตโนมัติ

แสดงรายการสถานะการบันทึกอัตโนมัติที่มีอยู่ทั้งหมดสำหรับไฟล์ที่เลือกพร้อมการประทับเวลาและภาพขนาดย่อ (หากมี) เลือกสถานะแล้วคลิก **กู้คืน** เพื่อเปิด

ใช้แท็บนี้เพื่อ:
- ฟื้นตัวหลังเกิดอุบัติเหตุ
- เปลี่ยนกลับเป็นสถานะก่อนหน้าจากเซสชันเดียวกัน

### แท็บที่เพิ่มขึ้น

แสดงรายการสถานะจุดตรวจสอบทั้งหมดที่จัดเก็บไว้ในไฟล์โครงการ แต่ละรายการจะแสดงการประทับเวลาของจุดตรวจสอบ เลือกจุดตรวจสอบแล้วคลิก **กู้คืน** เพื่อเปิด

ใช้แท็บนี้เพื่อ:
- กลับไปยังจุดก่อนหน้าในเซสชันโดยไม่ต้องบันทึกไฟล์แยกกัน
- เรียกดูประวัติเวอร์ชันของโครงการ

### แท็บล่าสุด

แท็บเริ่มต้นเมื่อกล่องโต้ตอบเปิดขึ้น ระบุสถานะการกู้คืนล่าสุดที่มีอยู่โดยอัตโนมัติทั้งจากการบันทึกอัตโนมัติและจุดตรวจสอบส่วนเพิ่ม และแสดงการประทับเวลา คลิก **กู้คืน** เพื่อโหลดทันทีโดยไม่ต้องเรียกดูแต่ละสถานะ

---

## ปุ่ม

| ปุ่ม | การกระทำ |
|--------|--------|
| **กู้คืน** | เปิดสถานะการกู้คืนที่เลือกเป็นอิมเมจใหม่ |
| **ปิด** | ปิดกล่องโต้ตอบโดยไม่กู้คืน |
| **ทำความสะอาดรัฐเก่า…** | เปิดพร้อมท์การล้างข้อมูล (ดูด้านล่าง) |

---

## ทำความสะอาดรัฐเก่าการสะสมสถานะการกู้คืนเมื่อเวลาผ่านไปอาจใช้พื้นที่ดิสก์จำนวนมาก ปุ่ม **ล้างสถานะเก่า…** (ด้านซ้ายล่างของกล่องโต้ตอบ) จะเปิดพร้อมท์การล้างข้อมูลสำหรับแท็บที่ใช้งานอยู่ (บันทึกอัตโนมัติหรือส่วนเพิ่ม)

ข้อความแจ้งจะแสดง:
- มีการบันทึกแบบเต็มจำนวนเท่าใดสำหรับไฟล์นี้
- พื้นที่ดิสก์ทั้งหมดที่พวกเขาครอบครอง
- ปุ่มหมุน **เก็บล่าสุด** เพื่อเลือกจำนวนบันทึกที่จะเก็บไว้

การตั้งค่า **เก็บล่าสุด** เป็น `0` จะลบสถานะการกู้คืนทั้งหมด Ctrl+S ถัดไปหลังจากการล้างข้อมูลทั้งหมดจะเขียนบันทึกหลักใหม่

---

## การกู้คืนการเริ่มต้น

เมื่อเริ่มต้นระบบ หาก Lumi ตรวจพบว่าไฟล์ที่เปิดล่าสุดมีข้อมูลการบันทึกอัตโนมัติที่ใหม่กว่าการบันทึกแบบเต็มครั้งล่าสุด ไฟล์จะแสดงพร้อมท์การกู้คืนก่อนที่จะโหลด คุณสามารถยอมรับ (โหลดการบันทึกอัตโนมัติ) หรือยกเลิก (เปิดการบันทึกหลักตามปกติ)