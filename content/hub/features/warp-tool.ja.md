---
title: "ワープツール"
type: docs
---
ワープ ツールは、キャンバス上でピクセルを自由に押したり、引いたり、流したりします。 Lumi では、ほとんどの実装よりもさらに進んでいます。つまり、ネストされたレイヤーやマスクの数に関係なく、レイヤー グループ全体を、構造を平坦化したり失ったりすることなく、単一の統合されたオブジェクトとしてワープできます。

## 概要

レイヤーを選択し、そのレイヤーをドラッグして任意の方向にピクセルを移動します。作業中のワープは非破壊的です。個々のストロークを元に戻したりやり直したり、ブラシ サイズやストローク間の動作を変更したり、コミットするまで微調整を続けることができます。コミットすると、累積されたディスプレイスメント マップがレイヤーのピクセル データに破壊的に適用されます。

**グループ レイヤー** が選択されている場合、ツールはグループ全体に対して動作します。複合グループ全体のライブ プレビューを表示して操作します。コミット時に、同じワープがグループ内のすべての子レイヤーとマスクに正確かつ独立して適用され、完全なレイヤー構造が維持されます。

## グループワープ

グループのワープは、Lumi のワープ ツールを際立たせる主な機能です。

### 解決できる問題

ほとんどのペイント プログラムでは、マルチレイヤーのイラストをワープするには、最初にグループを平坦化する (レイヤー構造を破壊する) か、各レイヤーを個別にワープして目で合わせてみる (面倒で不正確) かのどちらかが必要です。どちらのアプローチでも、さらなる非破壊編集のために元の構造は保存されません。

Lumi はグループ全体を 1 つのアイテムとしてワープし、まったく同じ変換をその内部のすべてのレイヤーに分配します。

### 仕組み

グループを選択してワープ ストロークを開始すると、Lumi はグループの合成投影から **フローティング プレビュー レイヤー**を構築します。グループにマスクがある場合、マスクはプレビューにベイクされるため、プレビューは最終的な外観を正確に表します。このプレビュー上でワープ ストロークを直接ペイントします。表示されているものがそのまま得られます。

コミット時に、Lumi は次のようにします。

1. グループ内のすべての基本レイヤー (サブグループ内の深くネストされたレイヤーを含む) にディスプレイスメントを適用し、ワープ領域全体をキャプチャするのに十分なだけ各レイヤーのキャンバスを拡張します。
2. 同じパス内のグループ内のすべてのマスクに同じディスプレイスメントを適用します。
3. グループの自動境界計算を再開し、新しくワープされた子に合わせてグループのサイズを変更します。
4. ファイル サイズをコンパクトに保つ​​ために、ワープした各レイヤーをトリミングして実際にペイントされたコンテンツに戻します。
5. プレビュー レイヤーを削除し、更新された子からグループ投影を再生成します。

これらすべては 1 回の元に戻す手順内で行われます。コミット後、グループはプレビューとまったく同じように表示され、すべてのレイヤーとマスクはそのままの状態になります。

### マスク

**ワープ マスク** オプション (デフォルトで有効) を使用すると、ワープ ターゲット内のすべてのレイヤーとグループのマスクに同一のディスプレイスメント変換が適用されます。レイヤー マスクはレイヤーとともに移動します。キャラクターのアウトラインをクリップしていたマスクは、ワープ後も同じアウトラインをクリップし続けます。

**ワープ マスク** がオフの場合、レイヤー コンテンツのみが置き換えられます。マスクは元の位置を保持します。

## ツールオプション

### 行動

|モード |効果 |
| :--- | :--- |
| **移動** |ピクセルをストロークの方向に押し込みます。ほとんどのワーピング作業の主なモード。 |
| **成長** |ブラシの中心から外側に向かってピクセルを拡張します。 |
| **縮小** |ピクセルをブラシの中心に向かって内側に引っ張ります。 |
| **時計回りに旋回** |ブラシの中心を中心にピクセルを時計回りに回転します。 |
| **反時計回りに渦巻きます** |ブラシの中心を中心にピクセルを反時計回りに回転します。 |
| **消去** |ワープ ディスプレイスメントを削除し、ピクセルを元の位置に戻します。 |
| **スムーズ** |変位を拡散し、歪んだ領域と歪んでいない領域の間の急激な変化を和らげます。 |

### ブラシ コントロール

- **サイズ**: ワープ ブラシの直径 (ピクセル単位)。ブラシが大きいほど、より柔らかいフォールオフでより広い領域を置き換えます。小さなブラシにより、正確な局所的な制御が可能になります。
- **硬度**: 中心から端に向かって減衰します。高い硬度により、ブラシ領域全体にわたって均一な変位が生成されます。硬度が低いと効果が中心に集中します。
- **強度**: ストロークごとにピクセルがどれだけ移動されるか。強度が低いと、微妙で段階的な成形が可能になります。より高い強度は劇的な、速い動きを生み出します。

### ストロークのタイミング

- **モーション中のストローク** (移動モードのみ): タイマー パルスだけではなく、マウスの移動に合わせてワープを継続的に適用します。カーソルを直接追跡する変位が必要な、流れるようなブラシのようなストロークに使用します。
- **定期的にストローク**: マウス ボタンを押している間、一定の時間間隔でワープを適用します。継続的に円形に塗布することが目的の成長、縮小、渦巻きモードに使用します。
- **レート**: 定期的なストローク適用の頻度。

### 品質

- **補間**: コミット時に使用されるサンプリング方法。 Linear はほとんどの作業で高速かつスムーズです。 Cubic と Nohalo では、細部の忠実度が高くなります。
- **高品質プレビュー**: インタラクティブ プレビュー中にコミット品質のサンプラーを使用します。速度は遅くなりますが、プレビューはコミットされた結果と正確に一致します。

### グループオプション

- **ワープ領域の拡張** (グループ ワープのみ): グループ プレビューの周囲のすべての側に透明なマージンとして追加されるピクセルの数。これにより、移動したコンテンツに移動できる余地が与えられます。ほとんどの作業にはデフォルトの 256 ピクセルで十分です。メモリが重要な大きなイメージの場合はこの値を減らし、非常に大きな変位ストロークの場合はこの値を増やします。
- **ワープ マスク**: レイヤー マスクとグループ マスクに同じワープを適用するかどうか。デフォルトではオンです。

## 元に戻すとやり直し

各ストロークは、ワープ セッション内の個別の元に戻すステップです。 **Ctrl+Z** は最後のストロークを削除し、ディスプレイスメント マップを以前の状態に戻します。 **Ctrl+Y** (または **Ctrl+Shift+Z**) で再適用されます。コミットする前に、ストローク履歴全体を遡ることができます。

**Escape** を押すかツールを切り替えると、コミットされていないストロークがすべて破棄され、レイヤーが元の状態に戻ります。明示的にコミットするまで変更は書き込まれません。

## コミット中

**Commit** ボタンをクリックして (または **Enter** を押して)、蓄積されたワープを破壊的に適用します。グループ ワープの場合、これにより、上で説明した完全なマルチレイヤー アプリケーションがトリガーされます。コミットされたワープの取り消し履歴は、画像の取り消しスタック内の 1 つのエントリとなり、標準の **編集 → 元に戻す** で元に戻すことができます。