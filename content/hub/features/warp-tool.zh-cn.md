---
title: "扭曲工具"
type: docs
---
扭曲工具在画布上自由地推、拉和流动像素。在 Lumi 中，它比大多数实现更进一步：它可以将整个图层组（无论它包含多少嵌套图层和遮罩）扭曲为单个统一对象，而不会展平或丢失任何结构。

## 概述

选择一个图层并在其上拖动以在任意方向上移动像素。在您工作时，扭曲是非破坏性的：您可以撤消和重做各个笔划，更改画笔大小或笔划之间的行为，并继续细化直到您提交。提交会将累积的位移图破坏性地应用于图层的像素数据。

当选择**组图层**时，该工具会对整个组进行操作。您可以查看整个合成组的实时预览并与之交互。提交时，相同的扭曲被精确且独立地应用于组内的每个子层和蒙版，从而保留完整的层结构。

## 组变形

扭曲组是 Lumi 扭曲工具与众不同的主要功能。

### 它解决的问题

在大多数绘画程序中，扭曲多层插图需要首先展平组（破坏图层结构）或单独扭曲每个图层并尝试通过眼睛匹配它们（繁琐且不精确）。这两种方法都不会保留原始结构以进行进一步的无损编辑。

Lumi 将整个组作为一个项目进行扭曲，然后将完全相同的变换分配到其中的每一层。

### 它是如何运作的

当您选择一个组并开始扭曲描边时，Lumi 会根据该组的合成投影构建一个**浮动预览图层**。如果该组有蒙版，则该蒙版会烘焙到预览中，以便预览准确地呈现最终外观。您可以直接在此预览上绘制扭曲笔触 - 您所看到的正是您所得到的。

在提交时，Lumi：

1. 将位移应用到组内的每个基本图层（包括子组中深度嵌套的图层），将每个图层的画布扩展至足以捕获完整的扭曲区域。
2. 在同一通道中对组内的每个蒙版应用相同的位移。
3. 恢复组的自动边界计算，以便调整组的大小以适合其新扭曲的子项。
4. 将每个变形图层裁剪回其实际绘制的内容，以保持文件大小紧凑。
5. 删除预览图层并从更新的子图层重新生成组投影。

所有这一切都发生在一个撤消步骤内。提交后，该组看起来与预览中的一模一样，每个图层和蒙版都完好无损。

### 面具

**扭曲蒙版**选项（默认情况下启用）会导致扭曲目标内的每个图层和组上的蒙版接收相同的位移变换。图层蒙版随其图层一起移动：剪切角色轮廓的蒙版在变形后继续剪切相同的轮廓。

当 **Warp Masks** 关闭时，只有图层内容会发生位移；面罩保留其原始位置。

## 工具选项

### 行为

|模式|效果|
| :--- | :--- |
| **移动** |沿笔画方向推动像素。大多数翘曲工作的主要模式。 |
| **成长** |从画笔中心向外扩展像素。 |
| **收缩** |将像素向内拉向画笔中心。 |
| **顺时针旋转** |围绕画笔中心顺时针旋转像素。 |
| **逆时针旋转** |围绕画笔中心逆时针旋转像素。 |
| **擦除** |消除扭曲位移，将像素恢复到原始位置。 |
| **平滑** |扩散位移，柔化扭曲和未扭曲区域之间的突然过渡。 |

### 画笔控制

- **大小**：扭曲画笔的直径（以像素为单位）。较大的画笔会取代更宽的区域，并产生更柔和的衰减；较小的刷子可提供精确的局部控制。
- **硬度**：从中心到边缘的衰减。高硬度可在整个刷子区域产生均匀的位移；低硬度将效果集中在中心。
- **强度**：每个笔画像素移动的距离。较低的强度可以实现微妙的、逐渐的塑形；更高的力量会产生戏剧性的、快速的运动。

### 划水计时

- **运动期间的行程**（仅限移动模式）：在鼠标移动时连续应用扭曲，而不是仅在计时器脉冲上应用扭曲。用于流畅的笔刷笔触，您希望位移直接跟随光标。
- **定期描边**：按住鼠标按钮时以固定时间间隔应用扭曲。用于增长、收缩和漩涡模式，其中连续循环应用是目的。
- **速率**：周期性行程应用的频率。

### 质量

- **插值**：提交时使用的采样方法。对于大多数工作来说，线性是快速且平稳的； Cubic 和 Nohalo 为精细细节提供了更高的保真度。
- **高质量预览**：在交互式预览期间使用提交质量采样器。速度较慢，但​​预览与提交的结果完全匹配。

### 组选项

- **扩展扭曲区域**（仅限组扭曲）：作为透明边距添加到所有侧面的组预览周围的像素数。这为流离失所的内容提供了进入的空间。默认 256 px 对于大多数工作来说已经足够了；对于内存很重要的大图像减少它，或者对于非常大的位移行程增加它。
- **扭曲蒙版**：是否对图层和组蒙版应用相同的扭曲。默认开启。

## 撤消和重做

每个笔划都是扭曲会话中的一个离散撤消步骤。 **Ctrl+Z** 删除最后一个笔划并将置换贴图恢复到之前的状态。 **Ctrl+Y**（或 **Ctrl+Shift+Z**）重新应用它。您可以在提交之前回顾整个中风历史记录。

按 **Escape** 或切换工具会丢弃所有未提交的笔画并将图层恢复到原始状态。在您明确提交之前不会写入任何更改。

## 承诺

单击 **Commit** 按钮（或按 **Enter**）以破坏性地应用累积的扭曲。对于组扭曲，这会触发上述完整的多层应用程序。已提交扭曲的撤消历史记录是图像撤消堆栈中的单个条目，可通过标准**编辑 → 撤消**进行逆转。